Привет. Меня зовут Шувалов Антон. И это первая лекция курса по express.js
на hexlet.org. На протяжении этого курса мы будем создавать свой блог на основе
express. 




Сегодняшная вводная лекция посвящена nodejs. И в ней мы в кратце
рассмотрим что это такое, какие идеи заложены ее в основу, что на ней пишут, и
какие существуют отличия от клиентского js.




Во-первых, давайте проясним, что такое nodejs.

NodeJS — это платформа на основе JavaScript runtime'а V8, позволяющая создавать
быстрые и масштабируемые сетевые приложения. Говоря простым языком, NodeJS — это
JavaScript, который работает на стороне сервера.

Основным и очень серьезным отличием NodeJS от того же PHP является однопоточность.
То есть, NodeJS выполняет весь код в одном потоке.

Давайте посмотрим на пример.

Фактически, выполнив такой код при обработке запроса,
вы заблокируете весь веб-сервер на одну секунду. Пока этот код выполняется,
Node.js вообще не будет реагировать на запросы от клиентов, потому что
Node.js использует один поток для выполнения всего вашего кода. То же самое
произойдет, если вы выполните какой-нибудь тяжелый код. Например, какие-нибудь
сложные математические расчеты.




Вообще, назвать это однозначно ужасным нельзя. Такое поведение может быть приемлимо
в различных скриптах, которые не используются одновременно несколькими пользователями.
Например, если мы напишем на NodeJS утилиту, которая будет склеивать все наши CSS-файлы
в один, и будем запускать ее вручную из консоли при необходимости, то не будет
ничего страшного, если мы будем использовать блокирующие операции.

С другой стороны, если мы говорим о различных сервисах, которые используются
большим количеством пользователей, то такое поведение абсолютно не приемлемо.
Дле решения этой проблемы следует использовать асинхронное API NodeJS. И,
по возможности, избегать тяжелых синхронных операций внутри вашего сервиса,
и, если это невозможно, то стоит делать их асинхронными.

Продолжая проводить параллель с PHP, можно подытожить на том, что асинхронный код —
это второе важное отличие NodeJS от PHP.




Третья особенность NodeJS о которой важно помнить — это модульность. 
Для nodejs написано огромное количество модулей. Найти модули можно на сайте
npmjs.org, и, с помощью пакетного менеджера npm, установить эти модули можно
одной командой в терминале.

О модулях не стоит забывать. Я считаю, что обязательно, в первую очередь,
вместо того, чтобы писать свое решение, стоит поискать в npm уже готовые.
Счет сэкономленному времени может легко вестись на дни.

С другой стороны, мне кажется очень правильным разбивать приложения на модули,
и публиковать их в npm. В архитектурном плане, модульность штука очень надежная —
достаточно легко поддерживать и переиспользовать небольшие модули. Такие модули
легко покрыть тестами, что значительно упрощает поддержку. 

Процитирую гуру JavaScript, Justin Meyer:

«Секрет создания больших приложений в том, чтобы никогда не создавать больших
приложений. Разбейте ваши приложения на маленькие части, а затем собирайте
из этих маленьких тестируемых фрагментов ваше большое приложение»




Для меня философия NodeJS заключается в этих трех несомненно важных аспектах:
однопоточность, асинхронность и модульность.


Вобщем-то, на этом все. На домашнее задание я предлагаю вам самостоятельно
разобраться еще с одной особенностью NodeJS, которая отличает серверную
среду от браузерной — глобальные переменные.


NodeJS имеет ряд общих глобальных объектов с браузерами, к примеру, 
таких как console, setTimeout, setInterval, ... . Но у NodeJS есть и свои
собственные глобальные объекты.

Прочитать о глобальных объектах NodeJS можно в документации, на сайте NodeJS.org,
Вот здесь. Так же я создал репозиторий на github в котором я написал несколько
примеров и особенностей использования глобальных переменных.

До встречи!
